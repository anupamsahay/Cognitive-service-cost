resources
| where type == "microsoft.cognitiveservices/accounts"
| extend 
    serviceName = name,
    serviceKind = kind,
    skuName = sku.name,
    skuTier = sku.tier
| extend estimatedMonthlyCost = case(
    // Azure OpenAI Service
    serviceKind == "OpenAI" and skuName == "S0", 500.0,
    
    // Computer Vision
    serviceKind == "ComputerVision" and skuName == "F0", 0.0,
    serviceKind == "ComputerVision" and skuName == "S1", 100.0,
    
    // Face API
    serviceKind == "Face" and skuName == "F0", 0.0,
    serviceKind == "Face" and skuName == "S0", 50.0,
    
    // Speech Services
    serviceKind == "SpeechServices" and skuName == "F0", 0.0,
    serviceKind == "SpeechServices" and skuName == "S0", 150.0,
    
    // Text Analytics / Language
    serviceKind == "TextAnalytics" and skuName == "F0", 0.0,
    serviceKind == "TextAnalytics" and skuName == "S", 200.0,
    serviceKind == "TextAnalytics" and skuName == "S0", 200.0,
    
    // Translator
    serviceKind == "TextTranslation" and skuName == "F0", 0.0,
    serviceKind == "TextTranslation" and skuName == "S1", 100.0,
    
    // Language Understanding (LUIS)
    serviceKind == "LUIS" and skuName == "F0", 0.0,
    serviceKind == "LUIS" and skuName == "S0", 75.0,
    
    // QnA Maker
    serviceKind == "QnAMaker" and skuName == "F0", 0.0,
    serviceKind == "QnAMaker" and skuName == "S0", 50.0,
    
    // Content Moderator
    serviceKind == "ContentModerator" and skuName == "F0", 0.0,
    serviceKind == "ContentModerator" and skuName == "S0", 40.0,
    
    // Anomaly Detector
    serviceKind == "AnomalyDetector" and skuName == "F0", 0.0,
    serviceKind == "AnomalyDetector" and skuName == "S0", 80.0,
    
    // Personalizer
    serviceKind == "Personalizer" and skuName == "F0", 0.0,
    serviceKind == "Personalizer" and skuName == "S0", 100.0,
    
    // Form Recognizer / Document Intelligence
    serviceKind == "FormRecognizer" and skuName == "F0", 0.0,
    serviceKind == "FormRecognizer" and skuName == "S0", 150.0,
    
    // Immersive Reader
    serviceKind == "ImmersiveReader" and skuName == "S0", 50.0,
    
    // Custom Vision
    serviceKind == "CustomVision.Training" and skuName == "F0", 0.0,
    serviceKind == "CustomVision.Training" and skuName == "S0", 20.0,
    serviceKind == "CustomVision.Prediction" and skuName == "F0", 0.0,
    serviceKind == "CustomVision.Prediction" and skuName == "S0", 10.0,
    
    // Cognitive Search
    serviceKind == "CognitiveServices" and skuName == "S1", 250.0,
    serviceKind == "CognitiveServices" and skuName == "S2", 1000.0,
    
    // Default
    50.0
)
| extend costCategory = case(
    estimatedMonthlyCost == 0, "Free Tier",
    estimatedMonthlyCost < 100, "Low Cost",
    estimatedMonthlyCost < 300, "Medium Cost",
    "High Cost"
)
| project 
    serviceName,
    serviceKind,
    resourceGroup,
    location,
    skuName,
    skuTier,
    estimatedMonthlyCost,
    costCategory,
    tags
| order by estimatedMonthlyCost desc
